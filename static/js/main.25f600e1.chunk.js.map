{"version":3,"sources":["FrequencyDomain.module.css","App.module.css","FourierCoefficients.module.css","FourierCoefficients.js","FrequencyDomain.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","Dials","props","className","styles","signal_container","signal_info","tooltip","tooltiptext","signal","id","onClick","i","onRemove","height","width","r","cx","cy","fill","colour","stroke","strokeWidth","signal_props","amplitude","toFixed","signal_id","input_type","type","min","max","value","step","onChange","phase","Controls","event","signalList","this","signals","length","push","key","renderDial","dials","global_controls","align-content","onAdd","style","gridRow","name","demoSignal","onDemoSignal","React","Component","FourierCirclesMagPos","divHeight","document","getElementById","getBoundingClientRect","divWidth","plotHeight","plotWidth","transform","onMouseDown","onMouseUp","onMouseOut","onMouseMove","FourierCirclesMagNeg","FourierCirclesPhasePos","FourierCirclesPhaseNeg","FourierMagPlot","FourierMagSvg","d3","xscale_freq","domain","range","yscale_freq","xAxisTicks","ticks","filter","tick","Number","isInteger","x_axis_freq","tickValues","tickFormat","y_axis_freq","append","attr","text","call","circleList","renderCirclePos","renderCircleNeg","FourierPhasePlot","FourierPhaseSvg","SinePlot","svgSinePlot","xscale","yscale","x_axis","scale","y_axis","current","svgID","pathID","concat","toString","pathData","curve","lineGenerator","values","SumPlot","svgSumPlot","sumSignals","k","j","n","FourierCoefficients","state","handleMouseDown","bind","handleMouseUp","handleMouseMove","handleMouseMoveFourierMag","handleMouseMoveFourierPhase","handleDemoSignal","setState","frequency","generateSignal","dragging","hsl","console","log","splice","remove","points","Ts","Math","PI","sin","inputType","target","getAttribute","signalID","parseFloat","isNaN","generateDC","e","preventDefault","clientX","clientY","rect","parentNode","left","top","circleCX","parseInt","emptyPlots","amp","pow","container","timePlots","sinePlots","position","border","sumPlots","otherPlots","fourierPhasePlots","fourierMagPlots","controls","handleChange","addSignal","removeSignal","signal_dials","Circles","FrequencyPlot","freqSvg","renderCircle","FrequencyDomain","circles","freqPlots","App","navbar","tab","to","exact","path","About","centertext","Home","ReactDOM","render","Boolean","window","location","hostname","match","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.25f600e1.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"home\":\"FrequencyDomain_home__30fuX\",\"container\":\"FrequencyDomain_container__DTkEc\",\"navbar\":\"FrequencyDomain_navbar__2nfHk\",\"tab\":\"FrequencyDomain_tab__2HYGI\",\"controls\":\"FrequencyDomain_controls__3_b1P\",\"dials\":\"FrequencyDomain_dials__1_C6C\",\"signal_container\":\"FrequencyDomain_signal_container__2wtJT\",\"signal_info\":\"FrequencyDomain_signal_info__2oOve\",\"signal_props\":\"FrequencyDomain_signal_props__3Psyr\",\"signal_dials\":\"FrequencyDomain_signal_dials__36fR_\",\"sinePlots\":\"FrequencyDomain_sinePlots__1Lmk_\",\"otherPlots\":\"FrequencyDomain_otherPlots__2dZs_\",\"freqPlots\":\"FrequencyDomain_freqPlots__2WRIF\",\"sumPlots\":\"FrequencyDomain_sumPlots__9CQRp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"home\":\"App_home__gVUmA\",\"container\":\"App_container__2fAhY\",\"navbar\":\"App_navbar__3YSH8\",\"tab\":\"App_tab__2izV7\",\"centertext\":\"App_centertext__1tHIr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"home\":\"FourierCoefficients_home__10kQG\",\"container\":\"FourierCoefficients_container__kd25g\",\"navbar\":\"FourierCoefficients_navbar__2pTv4\",\"tab\":\"FourierCoefficients_tab__8pHCY\",\"tooltip\":\"FourierCoefficients_tooltip__1v6vc\",\"tooltiptext\":\"FourierCoefficients_tooltiptext__P9iLV\",\"controls\":\"FourierCoefficients_controls___EOHp\",\"dials\":\"FourierCoefficients_dials__1zijK\",\"global_controls\":\"FourierCoefficients_global_controls__1LP2r\",\"signal_container\":\"FourierCoefficients_signal_container__1Of7C\",\"signal_info\":\"FourierCoefficients_signal_info__2oYZ9\",\"signal_props\":\"FourierCoefficients_signal_props__1Kcya\",\"signal_dials\":\"FourierCoefficients_signal_dials__kLbm8\",\"timePlots\":\"FourierCoefficients_timePlots__vs39U\",\"sinePlots\":\"FourierCoefficients_sinePlots__NqB9U\",\"otherPlots\":\"FourierCoefficients_otherPlots__AqeTC\",\"fourierMagPlots\":\"FourierCoefficients_fourierMagPlots__1Fesw\",\"fourierPhasePlots\":\"FourierCoefficients_fourierPhasePlots__3rZM3\",\"sumPlots\":\"FourierCoefficients_sumPlots__DMOR_\"};","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport styles from './FourierCoefficients.module.css'; \r\nimport * as d3 from \"d3\";\r\nimport { hsl } from 'd3';\r\n\r\nfunction Dials(props) {\r\n    return(\r\n        <div className={styles.signal_container}>\r\n            <div className={styles.signal_info}>\r\n\r\n                <div className={styles.tooltip}>\r\n                    | Help |\r\n                        <span className={styles.tooltiptext}>\r\n                            <p>This is the control panel to adjust signal properties.</p>\r\n                            <p>Try adjusting the Amplitude and Phase!</p>\r\n                        </span>\r\n                    \r\n                </div>\r\n                \r\n                <div>ID: {props.signal.id}</div>\r\n                <button id = \"remove-signal\" onClick={(i) => props.onRemove(props.signal.id)}> Remove Signal </button>\r\n                <div> Colour </div>\r\n                <svg height = \"40\" width = \"20\">\r\n                    <circle\r\n                        r = {10}\r\n                        cx = {10}\r\n                        cy = {20}\r\n                        fill = {props.signal.colour}\r\n                        stroke = \"black\"\r\n                        strokeWidth=\"1\"\r\n                    />\r\n                </svg>\r\n            </div>\r\n            <div className={styles.signal_props}>\r\n                <div>Amplitude: {props.signal.amplitude.toFixed(2)}</div>\r\n            </div>\r\n            <div className = {styles.signal_props}>\r\n                <div>\r\n                    <input \r\n                    id = {\"signal\" + props.signal.id + \"_AmpDial\" }\r\n                    signal_id = {props.signal.id}\r\n                    input_type = {\"AmpDial\"}\r\n                    type =\"range\" \r\n                    min={-5} \r\n                    max ={5} \r\n                    value = {props.signal.amplitude} \r\n                    step={0.1}\r\n                    onChange={props.onChange}\r\n                    /> \r\n                    <input\r\n                    id = {\"signal\" + props.signal.id + \"_AmpText\" }\r\n                    signal_id = {props.signal.id}\r\n                    input_type = {\"AmpText\"}\r\n                    type = \"number\"  \r\n                    min = {-5}\r\n                    max = {5}\r\n                    onChange={props.onChange}\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n\r\n            <div className={styles.signal_props}>\r\n                <div>Phase: {props.signal.phase}</div>\r\n            </div>\r\n            <div className={styles.signal_props}>\r\n                <div>\r\n                    <input \r\n                        id = {\"signal\" + props.signal.id + \"_PhaseDial\" }\r\n                        signal_id = {props.signal.id}\r\n                        input_type = {\"PhaseDial\"}\r\n                        type =\"range\" \r\n                        min={-180} \r\n                        max ={180} \r\n                        value = {props.signal.phase} \r\n                        step={1}\r\n                        onChange={props.onChange}\r\n                    /> \r\n                    <input\r\n                        id = {\"signal\" + props.signal.id + \"_PhaseText\" }\r\n                        signal_id = {props.signal.id}\r\n                        input_type = {\"PhaseText\"}\r\n                        type = \"number\"  \r\n                        min = {-180}\r\n                        max = {180}\r\n                        onChange={props.onChange}\r\n                    />\r\n                </div>        \r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nclass Controls extends React.Component {\r\n\r\n    renderDial(signal){\r\n        return(\r\n            <Dials\r\n                signal = {signal}\r\n                onChange = {(event) => this.props.onChange(event)}\r\n                onRemove = {(i) => this.props.onRemove(i)}\r\n            />\r\n        );\r\n    }\r\n\r\n    render(){\r\n        const signalList = []; \r\n        for (let i=0; i < this.props.signals.length; i++){\r\n            signalList.push(\r\n                <div key={\"signal\" + this.props.signals[i].id}> \r\n                    {this.renderDial(this.props.signals[i])} \r\n                </div>\r\n            )\r\n        }\r\n        return(\r\n            <div className = {styles.dials} >\r\n                <div className = {styles.global_controls}>\r\n\r\n                    <div className={styles.tooltip}>\r\n                        | Help |\r\n                            <span className={styles.tooltiptext}>\r\n                                <p>Try adding a signal!</p>\r\n                            </span>\r\n                    </div>\r\n                    <button id = \"add-signal\" align-content = \"center\" onClick={() => this.props.onAdd(0, 0)}> Add New Signal </button>\r\n                    <div style={{gridRow: \"2\"}}> Try a demo signal </div>\r\n                    <select name=\"demoSignal\" id=\"demoSignal\" \r\n                        value = {this.props.demoSignal}\r\n                        onChange = {(event) => this.props.onDemoSignal(event)}\r\n                        style={{gridRow: \"2\"}}>\r\n                        <option value =\"select\">- Select -</option>\r\n                        <option value =\"empty\">Empty</option>\r\n                        <option value=\"sine\">Sine Wave</option>\r\n                        <option value=\"even\">Even Wave</option>\r\n                        <option value=\"odd\">Odd Wave</option>\r\n                        <option value=\"triangle\">Triangle Wave</option>\r\n                    </select>\r\n                </div>\r\n                {signalList}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction FourierCirclesMagPos(props) {\r\n    let divHeight = document.getElementById(\"fourierMagPlotsID\").getBoundingClientRect().height;\r\n    let divWidth = document.getElementById(\"fourierMagPlotsID\").getBoundingClientRect().width;\r\n    let plotHeight = 0.8*divHeight;\r\n    let plotWidth = 0.8*divWidth;\r\n\r\n    return(\r\n        <circle\r\n            id = {\"circle_\"+props.signal.id}\r\n            signal_id = {props.signal.id}\r\n            cx = {(props.signal.id)*(plotWidth/8)}\r\n            cy = {(props.signal.amplitude)*(plotHeight/8)}\r\n            transform={\"translate(\" + divWidth/2 +\",\" + divHeight/2 +\") scale(1,-1)\"}\r\n            r = {10}\r\n            fill = {props.signal.colour}\r\n            stroke = \"black\"\r\n            strokeWidth=\"1\"\r\n            onMouseDown={props.onMouseDown}\r\n            onMouseUp={props.onMouseUp}\r\n            onMouseOut={props.onMouseUp}\r\n            onMouseMove={props.onMouseMove}\r\n        />\r\n    );\r\n}\r\n\r\nfunction FourierCirclesMagNeg(props) {\r\n    let divHeight = document.getElementById(\"fourierMagPlotsID\").getBoundingClientRect().height;\r\n    let divWidth = document.getElementById(\"fourierMagPlotsID\").getBoundingClientRect().width;\r\n    let plotHeight = 0.8*divHeight;\r\n    let plotWidth = 0.8*divWidth;\r\n\r\n    return(\r\n        <circle\r\n            id = {\"circle_-\"+props.signal.id}\r\n            signal_id = {props.signal.id}\r\n            cx = {(props.signal.id)*-(plotWidth/8)} // 8 is because our x-axis is divided into 8 sections \r\n            cy = {(props.signal.amplitude)*(plotHeight/8)}\r\n            transform={\"translate(\" + divWidth/2 +\",\" + divHeight/2 +\") scale(1,-1)\"}\r\n            r = {10}\r\n            fill = {props.signal.colour}\r\n            stroke = \"black\"\r\n            strokeWidth=\"1\"\r\n            onMouseDown={props.onMouseDown}\r\n            onMouseUp={props.onMouseUp}\r\n            onMouseOut={props.onMouseUp}\r\n            onMouseMove={props.onMouseMove}\r\n        />\r\n    );\r\n}\r\n\r\nfunction FourierCirclesPhasePos(props) {\r\n    let divHeight = document.getElementById(\"fourierPhasePlotsID\").getBoundingClientRect().height;\r\n    let divWidth = document.getElementById(\"fourierPhasePlotsID\").getBoundingClientRect().width;\r\n    let plotHeight = 0.8*divHeight;\r\n    let plotWidth = 0.8*divWidth;\r\n\r\n    return(\r\n        <circle\r\n            id = {\"circle_\"+props.signal.id}\r\n            signal_id = {props.signal.id}\r\n            cx = {(props.signal.id)*(plotWidth/8)} // 8 is because our x-axis is divided into 8 sections \r\n            cy = {(props.signal.phase)*(plotHeight/360)}\r\n            transform={\"translate(\" + divWidth/2 +\",\" + divHeight/2 +\") scale(1,-1)\"}\r\n            r = {10}\r\n            fill = {props.signal.colour}\r\n            stroke = \"black\"\r\n            strokeWidth=\"1\"\r\n            onMouseDown={props.onMouseDown}\r\n            onMouseUp={props.onMouseUp}\r\n            onMouseOut={props.onMouseUp}\r\n            onMouseMove={props.onMouseMove}\r\n        />\r\n    );\r\n}\r\n\r\nfunction FourierCirclesPhaseNeg(props) {\r\n    let divHeight = document.getElementById(\"fourierPhasePlotsID\").getBoundingClientRect().height;\r\n    let divWidth = document.getElementById(\"fourierPhasePlotsID\").getBoundingClientRect().width;\r\n    let plotHeight = 0.8*divHeight;\r\n    let plotWidth = 0.8*divWidth;\r\n\r\n    return(\r\n        <circle\r\n            id = {\"circle_-\"+props.signal.id}\r\n            signal_id = {props.signal.id}\r\n            cx = {(props.signal.id)*-(plotWidth/8)} // 8 is because our x-axis is divided into 8 sections \r\n            cy = {-(props.signal.phase)*(plotHeight/360)}\r\n            transform={\"translate(\" + divWidth/2 +\",\" + divHeight/2 +\") scale(1,-1)\"}\r\n            r = {10}\r\n            fill = {props.signal.colour}\r\n            stroke = \"black\"\r\n            strokeWidth=\"1\"\r\n            onMouseDown={props.onMouseDown}\r\n            onMouseUp={props.onMouseUp}\r\n            onMouseOut={props.onMouseUp}\r\n            onMouseMove={props.onMouseMove}\r\n        />\r\n    );\r\n}\r\n\r\nclass FourierMagPlot extends React.Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.height = 0;\r\n        this.width = 0;\r\n    }\r\n\r\n    componentDidMount(){\r\n        // Only get dimensions when DOM is loaded\r\n        this.height = document.getElementById(\"fourierMagPlotsID\").getBoundingClientRect().height;\r\n        this.width = document.getElementById(\"fourierMagPlotsID\").getBoundingClientRect().width;\r\n\r\n        let FourierMagSvg = d3.select(\"#svgFourierMagPlot\")\r\n\r\n        // Should probably check both axis if they exist before appending\r\n        if(!document.getElementById(\"x_axis_fourierMagPlot\")){\r\n   \r\n            // Create Axis for Frequency Plot\r\n            let xscale_freq = d3.scaleLinear()\r\n                    .domain([-4, 4]) // This needs to be dynamic\r\n                    .range([ (1/10)*this.width, (9/10)*this.width ]);\r\n\r\n            let yscale_freq = d3.scaleLinear()\r\n                    .domain([4,-4]) // This needs to be dynamic\r\n                    .range([ (1/10)*this.height, (9/10)*this.height ]);\r\n\r\n            // Add scales to axis\r\n            const xAxisTicks = xscale_freq.ticks()\r\n                                     .filter(tick => Number.isInteger(tick));\r\n \r\n            let x_axis_freq = d3.axisBottom(xscale_freq)\r\n             .tickValues(xAxisTicks)\r\n             .tickFormat(d3.format(\"d\"));\r\n\r\n            let y_axis_freq = d3.axisLeft(yscale_freq);\r\n\r\n            FourierMagSvg.append(\"text\")\r\n                         .attr(\"text-anchor\", \"middle\")  \r\n                         .attr(\"x\",this.width/2)\r\n                         .attr(\"y\",this.height/20)\r\n                         .style(\"font-size\", \"16px\") \r\n                         .style(\"text-decoration\", \"underline\")  \r\n                         .text(\"Fourier Magnitude Plot\");\r\n\r\n            FourierMagSvg.append('g')\r\n                         .attr(\"id\",\"x_axis_fourierMagPlot\")\r\n                         .attr(\"transform\",\"translate(0,\" + this.height/2 + \")\")\r\n                         .call(x_axis_freq)\r\n\r\n            FourierMagSvg.append('g')\r\n                         .attr(\"id\",\"y_axis_fourierMagPlot\")\r\n                         .attr(\"transform\",\"translate(\" + this.width/2 + \",0)\")\r\n                         .call(y_axis_freq); \r\n        }\r\n    }\r\n\r\n    renderCirclePos(signal){\r\n        return(\r\n            <FourierCirclesMagPos\r\n                signal = {signal}\r\n                onMouseDown = {(event) => this.props.onMouseDown(event)}\r\n                onMouseUp = {(event) => this.props.onMouseUp(event)}\r\n                onMouseOut = {(event) => this.props.onMouseUp(event)}\r\n                onMouseMove = {(event) => this.props.onMouseMove(event)}\r\n            />\r\n        );\r\n    }\r\n\r\n    renderCircleNeg(signal){\r\n        return(\r\n            <FourierCirclesMagNeg\r\n                signal = {signal}\r\n                onMouseDown = {(event) => this.props.onMouseDown(event)}\r\n                onMouseUp = {(event) => this.props.onMouseUp(event)}\r\n                onMouseOut = {(event) => this.props.onMouseUp(event)}\r\n                onMouseMove = {(event) => this.props.onMouseMove(event)}\r\n            />\r\n        );\r\n    }\r\n\r\n    render(){\r\n\r\n        const signals = this.props.signals;\r\n   \r\n           const circleList = [];\r\n          \r\n           for (let i=0; i < this.props.signals.length; i++){\r\n                if(i ==0){\r\n                    circleList.push(\r\n                        this.renderCirclePos(this.props.signals[i]) \r\n                    )\r\n                }\r\n                else{\r\n                    circleList.push(\r\n                        this.renderCirclePos(this.props.signals[i]),\r\n                        this.renderCircleNeg(this.props.signals[i])\r\n                    )\r\n                }\r\n           }                    \r\n   \r\n           return( \r\n               <svg>\r\n                  {circleList}\r\n               </svg>\r\n           );\r\n       }\r\n}\r\n\r\nclass FourierPhasePlot extends React.Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.height = 0;\r\n        this.width = 0;\r\n    }\r\n\r\n    componentDidMount(){\r\n        // Only get dimensions when DOM is loaded\r\n        this.height = document.getElementById(\"fourierPhasePlotsID\").getBoundingClientRect().height;\r\n        this.width = document.getElementById(\"fourierPhasePlotsID\").getBoundingClientRect().width;\r\n\r\n        let FourierPhaseSvg = d3.select(\"#svgFourierPhasePlot\")\r\n\r\n        // Should probably check both axis if they exist before appending\r\n        if(!document.getElementById(\"x_axis_fourierPhasePlot\")){\r\n   \r\n            // Create Axis for Frequency Plot\r\n            let xscale_freq = d3.scaleLinear()\r\n                    .domain([-4, 4]) // This needs to be dynamic\r\n                    .range([ (1/10)*this.width, (9/10)*this.width ]);\r\n\r\n            let yscale_freq = d3.scaleLinear()\r\n                    .domain([180,-180]) // This needs to be dynamic\r\n                    .range([ (1/10)*this.height, (9/10)*this.height ]);\r\n\r\n            // Add scales to axis\r\n            const xAxisTicks = xscale_freq.ticks()\r\n                                     .filter(tick => Number.isInteger(tick));\r\n \r\n            let x_axis_freq = d3.axisBottom(xscale_freq)\r\n             .tickValues(xAxisTicks)\r\n             .tickFormat(d3.format(\"d\"));\r\n\r\n            let y_axis_freq = d3.axisLeft(yscale_freq);\r\n            \r\n            FourierPhaseSvg.append(\"text\")\r\n                         .attr(\"text-anchor\", \"middle\")  \r\n                         .attr(\"x\",this.width/2)\r\n                         .attr(\"y\",this.height/20)\r\n                         .style(\"font-size\", \"16px\") \r\n                         .style(\"text-decoration\", \"underline\")  \r\n                         .text(\"Fourier Phase Plot\"); \r\n\r\n            FourierPhaseSvg.append('g')\r\n                         .attr(\"id\",\"x_axis_fourierPhasePlot\")\r\n                         .attr(\"transform\",\"translate(0,\" + this.height/2 + \")\")\r\n                         .call(x_axis_freq)\r\n\r\n            FourierPhaseSvg.append('g')\r\n                         .attr(\"id\",\"y_axis_fourierPhasePlot\")\r\n                         .attr(\"transform\",\"translate(\" + this.width/2 + \",0)\")\r\n                         .call(y_axis_freq); \r\n        }\r\n    }\r\n\r\n    renderCirclePos(signal){\r\n        return(\r\n            <FourierCirclesPhasePos\r\n                signal = {signal}\r\n                onMouseDown = {(event) => this.props.onMouseDown(event)}\r\n                onMouseUp = {(event) => this.props.onMouseUp(event)}\r\n                onMouseOut = {(event) => this.props.onMouseUp(event)}\r\n                onMouseMove = {(event) => this.props.onMouseMove(event)}\r\n            />\r\n        );\r\n    }\r\n\r\n    renderCircleNeg(signal){\r\n        return(\r\n            <FourierCirclesPhaseNeg\r\n                signal = {signal}\r\n                onMouseDown = {(event) => this.props.onMouseDown(event)}\r\n                onMouseUp = {(event) => this.props.onMouseUp(event)}\r\n                onMouseOut = {(event) => this.props.onMouseUp(event)}\r\n                onMouseMove = {(event) => this.props.onMouseMove(event)}\r\n            />\r\n        );\r\n    }\r\n\r\n    render(){\r\n\r\n        const signals = this.props.signals;\r\n    \r\n           const circleList = []; \r\n           \r\n           for (let i=0; i < this.props.signals.length; i++){\r\n\r\n                if(i ==0){\r\n                    circleList.push(\r\n                        this.renderCirclePos(this.props.signals[i]) \r\n                    )\r\n                }\r\n                else{\r\n                    circleList.push(\r\n                        this.renderCirclePos(this.props.signals[i]),\r\n                        this.renderCircleNeg(this.props.signals[i])\r\n                    )\r\n                }\r\n               \r\n           }\r\n   \r\n           return( \r\n               <svg>\r\n                  {circleList}\r\n               </svg>\r\n           );\r\n       }\r\n}\r\n\r\n\r\nclass SinePlot extends React.Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.height = 0;\r\n        this.width = 0;\r\n    }\r\n\r\n    componentDidMount(){\r\n        // Only get dimensions when DOM is loaded\r\n        this.height = document.getElementById(\"sinePlotsID\").getBoundingClientRect().height;\r\n        this.width = document.getElementById(\"sinePlotsID\").getBoundingClientRect().width;\r\n\r\n        const svgSinePlot = d3.select(\"#svgSinePlot\")\r\n\r\n         // Create scale\r\n        let xscale = d3.scaleLinear()\r\n                        .domain([0, 2]) // This needs to be dynamic\r\n                        .range([ (1/10)*this.width, (9/10)*this.width ]);\r\n\r\n        let yscale = d3.scaleLinear()\r\n                        .domain([4,-4]) // This needs to be dynamic\r\n                        .range([ (1/10)*this.height, (9/10)*this.height ]);\r\n\r\n        // Add scales to axis\r\n        let x_axis = d3.axisBottom()\r\n                        .scale(xscale);\r\n\r\n        let y_axis = d3.axisLeft()\r\n                        .scale(yscale);\r\n\r\n        svgSinePlot.append(\"text\")\r\n                .attr(\"text-anchor\", \"middle\")  \r\n                .attr(\"x\",this.width/2)\r\n                .attr(\"y\",this.height/20)\r\n                .style(\"font-size\", \"16px\") \r\n                .style(\"text-decoration\", \"underline\")  \r\n                .text(\"Sine Plots\");\r\n\r\n                svgSinePlot.append('g')\r\n                .attr(\"transform\", \"translate(0,\" + this.height/2 + \")\")\r\n                .call(x_axis);\r\n\r\n                svgSinePlot.append('g')\r\n                .attr(\"transform\",\"translate(\" + (1/10)*this.width + \",0)\")\r\n                .call(y_axis)\r\n\r\n\r\n    }\r\n\r\n    render(){\r\n        const current = this.props.signals;\r\n    \r\n        // \"Overlay all sine plots into one graph\" version\r\n        for(let i = 0; i < current.length; i++){\r\n\r\n            let svgID  = 'svg_'\r\n            let pathID = 'path_'\r\n            svgID = svgID.concat(i.toString(10))\r\n            pathID = pathID.concat(i.toString(10))\r\n\r\n            let lineGenerator = d3.line().curve(d3.curveNatural);\r\n  \r\n            let pathData = lineGenerator(current[i].values);\r\n    \r\n            //The svg line Path we draw\r\n    \r\n            // If exists, update\r\n            if(document.getElementById(pathID)){\r\n                d3.select(\"#\"+pathID).attr(\"d\", pathData)                      \r\n            }\r\n            \r\n            // Draws path if it doesn't exist\r\n            if(!document.getElementById(pathID)){\r\n                d3.select(\"#svgSinePlot\").append(\"path\")\r\n                    .attr(\"id\",pathID)\r\n                    .attr(\"d\", pathData)\r\n                    .attr(\"transform\",\"translate(\" + (1/10)*this.width + \")\")\r\n                    .attr(\"stroke\", current[i].colour)\r\n                    .attr(\"stroke-width\", 2)\r\n                    .attr(\"fill\", \"none\")\r\n          }\r\n        }\r\n\r\n\r\n        // Appending svg\r\n        // Check if the element 'svg_id' exists. If not, create new svg, append and draw it\r\n        // Not sure if this scales well\r\n\r\n        /* Code for seperate Plots\r\n        for(let i = 0; i < current.length; i++){\r\n\r\n            let svgID  = 'svg_'\r\n            let pathID = 'path_'\r\n            svgID = svgID.concat(i.toString(10))\r\n            pathID = pathID.concat(i.toString(10))\r\n\r\n            let lineGenerator = d3.line()\r\n                                  .curve(d3.curveNatural);\r\n\r\n            let pathData = lineGenerator(current[i].values);\r\n\r\n             // Create scale\r\n            let xscale = d3.scaleLinear()\r\n                        .domain([0, 2]) // This needs to be dynamic\r\n                        .range([ (1/10)*this.width, (9/10)*this.width ]);\r\n\r\n            let yscale = d3.scaleLinear()\r\n                        .domain([4,-4]) // This needs to be dynamic\r\n                        .range([ (1/10)*this.height, (9/10)*this.height ]);\r\n\r\n            // Add scales to axis\r\n            let x_axis = d3.axisBottom()\r\n                .scale(xscale);\r\n\r\n            let y_axis = d3.axisLeft()\r\n                .scale(yscale);\r\n\r\n            // For now, if svgID exists, then just redraw\r\n            if(document.getElementById(svgID)){\r\n                d3.select(\"#\"+pathID).attr(\"d\", pathData)  \r\n            }\r\n            \r\n            // If svgID doesn't exist, then add it to the DOM\r\n\r\n            if(!document.getElementById(svgID)){\r\n                //The SVG Container\r\n                const svgSinePlot = d3.select(\"#sinePlotsID\").append(\"svg\")\r\n                .attr(\"id\",svgID)\r\n                .attr(\"width\", \"40vw\")\r\n                .attr(\"height\", \"45vh\")\r\n                .attr(\"style\",\"position: absolute\")\r\n                .attr(\"style\", \"border: 1px solid black\")\r\n\r\n                svgSinePlot.append(\"text\")\r\n                .attr(\"text-anchor\", \"middle\")  \r\n                .attr(\"x\",this.width/2)\r\n                .attr(\"y\",this.height/20)\r\n                .style(\"font-size\", \"16px\") \r\n                .style(\"text-decoration\", \"underline\")  \r\n                .text(\"Sine Plot \" + i);\r\n\r\n                //The line SVG Path we draw\r\n                svgSinePlot.append(\"path\")\r\n                .attr(\"id\",pathID)\r\n                .attr(\"transform\",\"translate(\" + (1/10)*this.width + \",0)\")\r\n                .attr(\"d\", pathData)\r\n                .attr(\"stroke\", current[i].colour)\r\n                .attr(\"stroke-width\", 2)\r\n                .attr(\"fill\", \"none\")\r\n\r\n                svgSinePlot.append('g')\r\n                .attr(\"transform\",\"translate(0,\" + this.height/2 + \")\")\r\n                .call(x_axis);\r\n                \r\n                svgSinePlot.append('g')\r\n                .attr(\"transform\",\"translate(\" + (1/10)*this.width + \",0)\")\r\n                .call(y_axis);\r\n            }          \r\n        }\r\n        */\r\n\r\n        return(\r\n            <div></div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nclass SumPlot extends React.Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.height = 0;\r\n        this.width = 0;\r\n    }\r\n\r\n    componentDidMount(){\r\n        // Only get dimensions when DOM is loaded\r\n        this.height = document.getElementById(\"svgSumPlot\").getBoundingClientRect().height;\r\n        this.width = document.getElementById(\"svgSumPlot\").getBoundingClientRect().width;\r\n\r\n        // Create scale\r\n        let xscale = d3.scaleLinear()\r\n        .domain([0, 2]) // This needs to be dynamic\r\n        .range([ (1/10)*this.width, (9/10)*this.width ]);\r\n\r\n        let yscale = d3.scaleLinear()\r\n        .domain([4,-4]) // This needs to be dynamic\r\n        .range([(1/10)*this.height, (9/10)*this.height ]);\r\n\r\n        // Add scales to axis\r\n        let x_axis = d3.axisBottom()\r\n        .scale(xscale);\r\n\r\n        let y_axis = d3.axisLeft()\r\n        .scale(yscale);\r\n\r\n        const svgSumPlot = d3.select(\"#svgSumPlot\")\r\n\r\n                svgSumPlot.append(\"text\")\r\n                .attr(\"text-anchor\", \"middle\")  \r\n                .attr(\"x\",this.width/2)\r\n                .attr(\"y\",this.height/20)\r\n                .style(\"font-size\", \"16px\") \r\n                .style(\"text-decoration\", \"underline\")  \r\n                .text(\"Sum of Signals Plot\");\r\n\r\n                svgSumPlot.append('g')\r\n                .attr(\"transform\", \"translate(0,\" + this.height/2 + \")\")\r\n                .call(x_axis);\r\n\r\n                svgSumPlot.append('g')\r\n                .attr(\"transform\",\"translate(\" + (1/10)*this.width + \",0)\")\r\n                .call(y_axis)\r\n    }\r\n\r\n    render(){\r\n\r\n        let sumSignals = []; \r\n        let plotWidth = 0.8 * this.width;\r\n        // console.log(this.height);\r\n        // console.log(this.width);\r\n\r\n        // This will break if we change plotWidth elsewhere \r\n        for(let k = 0; k < plotWidth; k++){\r\n            sumSignals.push([0,0]);\r\n        }\r\n\r\n        // Looping through all the signals\r\n        for (let i=0; i < this.props.signals.length; i++){\r\n\r\n            // Looping through the signal values\r\n            for(let j=0; j < this.props.signals[i].values.length; j++){\r\n\r\n                //sumSignals[j] = this.props.signals[i].values[j];\r\n                sumSignals[j][0] = this.props.signals[i].values[j][0];\r\n                sumSignals[j][1] += this.props.signals[i].values[j][1];\r\n            }\r\n            \r\n        }\r\n\r\n        // Should scale this to the svg dimenesions rather than hardcoding it with svgContainerHeight\r\n        for (let n =0; n < sumSignals.length; n++){\r\n            sumSignals[n][1] = sumSignals[n][1] - (this.props.signals.length-1)*(this.height/2)\r\n        }\r\n\r\n        let lineGenerator = d3.line()\r\n          .curve(d3.curveNatural);\r\n\r\n        let pathData = lineGenerator(sumSignals);\r\n\r\n        //The svg line Path we draw\r\n\r\n        // If exists, update\r\n        if(document.getElementById(\"path_Sum\")){\r\n            d3.select(\"#\"+\"path_Sum\").attr(\"d\", pathData)  \r\n               \r\n        }\r\n        \r\n        // Draws path if it doesn't exist\r\n        if(!document.getElementById(\"path_Sum\")){\r\n             d3.select(\"#svgSumPlot\").append(\"path\")\r\n                .attr(\"id\",\"path_Sum\")\r\n                .attr(\"d\", pathData)\r\n                .attr(\"transform\",\"translate(\" + (1/10)*this.width + \")\")\r\n                .attr(\"stroke\", \"black\")\r\n                .attr(\"stroke-width\", 2)\r\n                .attr(\"fill\", \"none\")\r\n        }\r\n\r\n        return(\r\n            <div></div>\r\n        );\r\n    }\r\n}\r\n\r\nexport class FourierCoefficients extends React.Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            signals: [\r\n                /* Example signal object \r\n                {\r\n                    id: 0,\r\n                    amplitude: 1,\r\n                    frequency: 1,\r\n                    values: this.generateSignal(1,1),\r\n                    dragging: false,    \r\n                },\r\n                */\r\n            ],\r\n            demoSignal: 'select',\r\n        };\r\n        // This binding is necessary to make `this.` work in the callback   \r\n        this.handleMouseDown = this.handleMouseDown.bind(this);\r\n        this.handleMouseUp = this.handleMouseUp.bind(this);\r\n        this.handleMouseMove = this.handleMouseMove.bind(this);\r\n        this.handleMouseMoveFourierMag = this.handleMouseMoveFourierMag.bind(this);\r\n        this.handleMouseMoveFourierPhase = this.handleMouseMoveFourierPhase.bind(this);\r\n        this.handleDemoSignal = this.handleDemoSignal.bind(this);\r\n    }\r\n    \r\n    addSignal(amplitude, phase){\r\n        const signals = this.state.signals;\r\n\r\n        // Once this.setState has been called, it'll call render() to render straight away\r\n        this.setState({\r\n            signals: signals.concat([{       // Just concatenating array of JSON\r\n                id: signals.length,\r\n                amplitude: amplitude,                // Should be user input\r\n                frequency: signals.length,   // Should be user input\r\n                phase: phase,\r\n                values: this.generateSignal(amplitude,signals.length,phase),\r\n                dragging: false,    \r\n                colour: hsl(signals.length*60, 100, 50)\r\n            },]),\r\n        });        \r\n\r\n\r\n    }\r\n\r\n    removeSignal(i){\r\n        // Need to find signal id from the array and delete, then re-update id's\r\n        const signals = this.state.signals;\r\n\r\n\r\n        console.log(\"Hi from removeSignal\");    \r\n        console.log(i)\r\n        console.log(\"Before: \", signals);\r\n        signals.splice(i,1)\r\n        console.log(\"After:\", signals);\r\n\r\n        \r\n        for(let n = 0; n< this.state.signals.length; n++){\r\n            signals[n].id = n;\r\n        }        \r\n\r\n        // Find the svgId and pathID and delete from DOM\r\n\r\n        let svgID  = 'svg_'\r\n        let pathID = 'path_'\r\n        svgID = svgID.concat(i.toString(10))\r\n        pathID = pathID.concat(i.toString(10))\r\n\r\n        d3.select(\"#\"+svgID).remove();\r\n        d3.select(\"#\"+pathID).remove();\r\n\r\n        this.setState({\r\n            signals: signals,\r\n        });\r\n        console.log(this.state.signals);\r\n\r\n    \r\n    }\r\n\r\n    generateSignal(amplitude, frequency, phase){\r\n        // Generating path data\r\n        let points = [];\r\n        // This assumes that sumPlot and sinePlots have the same dimensions, since generateSignal() is called from those plots\r\n        const divHeight = document.getElementById(\"svgSumPlot\").getBoundingClientRect().height;\r\n        const plotWidth = 0.8 * document.getElementById(\"svgSumPlot\").getBoundingClientRect().width;\r\n        // console.log(\"Plot Width\",plotWidth)\r\n        // console.log(\"Div Height\", divHeight)\r\n        let scale = -divHeight/10;\r\n        let x_offset = 0;\r\n        let y_offset = 0;\r\n\r\n        // let Fs = 80;\r\n        let Ts = Math.PI / (plotWidth/4);\r\n\r\n        /* Calculation Reference\r\n        // Assuming the plot is 800x800\r\n        // 1 period = 1 second\r\n        // 1 period = 400 pixels => Ts = 400 samples per second\r\n        // 1 Hz = 2pi radians\r\n\r\n        // Sampling frequency = samples/second\r\n        // 1 sample per 1/400 second (Ts = 1/400)\r\n        // Fs = 2pi * (1/400)\r\n        // Fs = pi / 200\r\n\r\n        // Frequency is in Hz\r\n        // This is bascially an inverse FFT \r\n        // i is basically our t (1 unit of time)\r\n        */\r\n        for(let i = x_offset; i< plotWidth; i++)\r\n        {\r\n            points[i] = [i, scale*amplitude*Math.sin(Ts*frequency*i + (phase * (Math.PI / 180) )) + (divHeight/2 + y_offset)];\r\n        }\r\n        // console.log(\"Plot Length\", points.length)\r\n\r\n        return points;\r\n    }\r\n\r\n    generateDC(amplitude){\r\n        let points = [];\r\n        const divHeight = document.getElementById(\"svgSumPlot\").getBoundingClientRect().height;\r\n        const plotWidth = 0.8 * document.getElementById(\"svgSumPlot\").getBoundingClientRect().width;\r\n        let scale = - divHeight/10;\r\n\r\n        let x_offset = 0;\r\n        let y_offset = 0;\r\n\r\n        for(let i = x_offset; i< plotWidth; i++)\r\n        {\r\n            points[i] = [i, scale*amplitude + (divHeight/2 + y_offset)];\r\n        }\r\n \r\n        return points\r\n    }\r\n\r\n    updateDials(){\r\n        const signals = this.state.signals;\r\n\r\n        for(let i = 0; i< signals.length; i++){\r\n            document.getElementById(\"signal\" + signals[i].id + \"_AmpText\").value = signals[i].amplitude;\r\n            document.getElementById(\"signal\" + signals[i].id + \"_FreqText\").value = signals[i].frequency;\r\n        }\r\n    }\r\n\r\n    handleChange(event){\r\n\r\n        console.log(event)\r\n\r\n        const signals = this.state.signals;\r\n        const inputType = event.target.getAttribute('input_type');\r\n        const signalID = event.target.getAttribute('signal_id'); // Signal ID Number\r\n        let value = parseFloat(event.target.value);   \r\n\r\n        // Text Form can currently exceed the maximum limit of 10, should limit?\r\n\r\n        if((inputType === \"AmpDial\") || (inputType === \"AmpText\")){\r\n            if(isNaN(value)){\r\n                value = 0;\r\n            }\r\n            else{\r\n                // DC Case\r\n                if(signalID == 0){\r\n                    signals[signalID].amplitude = value; \r\n                    signals[signalID].values = this.generateDC(signals[signalID].amplitude);\r\n                    document.getElementById(\"signal\" + signalID + \"_AmpText\").value = value;\r\n                }\r\n                // All Other cases\r\n                else{\r\n                    signals[signalID].amplitude = value;                 \r\n                    signals[signalID].values = this.generateSignal(signals[signalID].amplitude, signals[signalID].frequency, signals[signalID].phase);\r\n                    document.getElementById(\"signal\" + signalID + \"_AmpText\").value = value;\r\n                }     \r\n            }\r\n        }\r\n        else if ((inputType === \"PhaseDial\") || (inputType === \"PhaseText\")){\r\n            console.log(\"HELLO\")\r\n            console.log(signals[signalID].amplitude)\r\n            console.log(signals[signalID].phase)\r\n\r\n            if(isNaN(value)){\r\n                value = 0;\r\n            }\r\n            else{\r\n                // DC Case\r\n                if(signalID == 0){\r\n                    signals[signalID].phase = value; \r\n                    signals[signalID].values = this.generateDC(signals[signalID].amplitude);\r\n                    document.getElementById(\"signal\" + signalID + \"_PhaseText\").value = value;\r\n                }\r\n                 // All Other cases\r\n                else{\r\n                    signals[signalID].phase = value; \r\n                    signals[signalID].values = this.generateSignal(signals[signalID].amplitude, signals[signalID].frequency, signals[signalID].phase);\r\n                    document.getElementById(\"signal\" + signalID + \"_PhaseText\").value = value;\r\n                }\r\n            }\r\n        }     \r\n\r\n        this.setState({\r\n                signals: signals,   \r\n            }   \r\n        );\r\n\r\n    }\r\n\r\n    \r\n    handleMouseDown(e){\r\n        console.log(\"clicked\")\r\n\r\n        e.preventDefault();\r\n        const signals = this.state.signals;\r\n        const signalID = e.target.getAttribute('signal_id'); // Signal ID Number\r\n\r\n        signals[signalID].dragging = true;\r\n\r\n        this.setState({\r\n            signals: signals,   \r\n            }\r\n        );   \r\n    }\r\n\r\n    handleMouseUp(e){\r\n        console.log(\"click released\")\r\n\r\n        const signals = this.state.signals;\r\n        const signalID = e.target.getAttribute('signal_id'); // Signal ID Number\r\n        console.log(e.type)\r\n        \r\n        if(e.type == 'mouseout' && signals[signalID].dragging) {\r\n            console.log(\"mouse went out\")\r\n        }\r\n\r\n        signals[signalID].dragging = false;\r\n        \r\n        this.setState({\r\n            signals: signals,   \r\n            }\r\n        );\r\n        \r\n    }\r\n\r\n    // Base Mouse move function. Used in Frequency Domain. Not currently in use in this .js file\r\n    handleMouseMove(e) {\r\n\r\n        const signals = this.state.signals;\r\n        const signalID = e.target.getAttribute('signal_id'); // Signal ID Number\r\n\r\n        //If we are dragging\r\n          if (signals[signalID].dragging) {\r\n              e.preventDefault();\r\n\r\n              console.log(e)\r\n              console.log(e.target)\r\n              console.log(\"clientX:\",e.clientX)\r\n              console.log(\"clientY:\",e.clientY)\r\n              // console.log(e.target.parentNode.parentNode)\r\n            let  rect = e.target.parentNode.parentNode.getBoundingClientRect();  \r\n\r\n            console.log(rect.left);\r\n            console.log(rect.top);\r\n\r\n\r\n            // Maybe should seperate coordinates and freq/amp values\r\n             signals[signalID].frequency = (e.clientX - rect.left - 400) / 100;\r\n             signals[signalID].amplitude = - (e.clientY - rect.top - 400) / 100;\r\n             signals[signalID].values = this.generateSignal(signals[signalID].amplitude, signals[signalID].frequency, signals[signalID].phase);\r\n\r\n\r\n            // We should set position limits\r\n\r\n            console.log(signals[signalID].frequency)\r\n            console.log(signals[signalID].amplitude)\r\n\r\n            console.log(this)\r\n\r\n            this.setState({\r\n                signals: signals,   \r\n                }\r\n            );  \r\n        }\r\n    }\r\n\r\n    handleMouseMoveFourierMag(e) {\r\n\r\n        const signals = this.state.signals;\r\n        const signalID = e.target.getAttribute('signal_id'); // Signal ID Number\r\n\r\n        //If we are dragging\r\n          if (signals[signalID].dragging) {\r\n              e.preventDefault();\r\n\r\n\r\n            console.log(e.target)\r\n            let  rect = e.target.parentNode.parentNode.getBoundingClientRect();  \r\n\r\n            let divHeight = document.getElementById(\"fourierMagPlotsID\").getBoundingClientRect().height;\r\n            let divWidth = document.getElementById(\"fourierMagPlotsID\").getBoundingClientRect().width;\r\n            let plotHeight = 0.8*divHeight;\r\n            let plotWidth = 0.8*divWidth;\r\n\r\n            // Maybe should seperate coordinates and freq/amp values\r\n             signals[signalID].frequency = signals[signalID].id;\r\n             signals[signalID].amplitude = - (e.clientY - rect.top - divHeight/2) / (plotHeight/8);    // 800: svg height, 8: max axis size (-4 to 4)\r\n             signals[signalID].values = this.generateSignal(signals[signalID].amplitude, signals[signalID].frequency, signals[signalID].phase);\r\n\r\n            // We should set position limits\r\n\r\n            // Checking if signal is the DC value\r\n            if(signalID == 0){\r\n                signals[signalID].values = this.generateDC(signals[signalID].amplitude);\r\n            }\r\n\r\n            this.setState({\r\n                signals: signals,   \r\n                }\r\n            );  \r\n        }\r\n    }\r\n    \r\n    handleMouseMoveFourierPhase(e) {\r\n\r\n        const signals = this.state.signals;\r\n        const signalID = e.target.getAttribute('signal_id'); // Signal ID Number\r\n        const circleCX = e.target.getAttribute('cx'); // Circle x position\r\n        console.log(\"signalID: \",signalID)\r\n        console.log(circleCX)\r\n\r\n        //If we are dragging\r\n          if (signals[signalID].dragging) {\r\n              e.preventDefault();\r\n\r\n\r\n            console.log(e.target)\r\n            let  rect = e.target.parentNode.parentNode.getBoundingClientRect();  \r\n\r\n            let divHeight = document.getElementById(\"fourierPhasePlotsID\").getBoundingClientRect().height;\r\n            let divWidth = document.getElementById(\"fourierPhasePlotsID\").getBoundingClientRect().width;\r\n            let plotHeight = 0.8*divHeight;\r\n            let plotWidth = 0.8*divWidth;\r\n\r\n            // Maybe should seperate coordinates and freq/amp values\r\n\r\n            if(circleCX >= 0){\r\n                signals[signalID].phase = parseInt( - (e.clientY - rect.top - divHeight/2) / (plotHeight/360));\r\n            } \r\n            else if(circleCX < 0){\r\n                signals[signalID].phase = parseInt( (e.clientY - rect.top - divHeight/2) / (plotHeight/360));\r\n            } \r\n\r\n            signals[signalID].frequency = signals[signalID].id; \r\n            signals[signalID].values = this.generateSignal(signals[signalID].amplitude, signals[signalID].frequency, signals[signalID].phase);\r\n\r\n            // We should set position limits\r\n\r\n            // Checking if signal is the DC value\r\n            if(signalID == 0){\r\n                signals[signalID].values = this.generateDC(signals[signalID].amplitude);\r\n            }\r\n\r\n            this.setState({\r\n                signals: signals,   \r\n                }\r\n            );  \r\n        }\r\n    }\r\n\r\n    emptyPlots(){\r\n        let signals = this.state.signals;\r\n\r\n        for(let i = 0; i< this.state.signals.length; i++){\r\n            let svgID  = 'svg_'                    \r\n            let pathID = 'path_'\r\n\r\n            svgID = svgID.concat(i.toString(10))\r\n            pathID = pathID.concat(i.toString(10))\r\n\r\n            d3.select(\"#\"+svgID).remove();\r\n            d3.select(\"#\"+pathID).remove();\r\n        }  \r\n\r\n        return signals = [];\r\n    }\r\n\r\n    handleDemoSignal(e){\r\n\r\n        let signals = this.state.signals;\r\n        const demoSignal = e.target.value;\r\n\r\n\r\n        if(demoSignal == 'empty'){\r\n            signals = this.emptyPlots();\r\n        }\r\n\r\n        // Note: If you make multiple setState() calls, only the last call will run (the prior ones won't run)\r\n        // Hence why here, we instead of repeatedly calling addSignal(), we explicitly generate the signals array\r\n        // setState() is asynchronous and are batched for performance gains. \r\n        \r\n        if(demoSignal == 'sine'){\r\n \r\n            signals = this.emptyPlots();\r\n\r\n            // Generating DC signal\r\n            signals = signals.concat([{       \r\n                id: signals.length,\r\n                amplitude: 0,               \r\n                frequency: signals.length,  \r\n                phase: 0,\r\n                values: this.generateDC(0,signals.length,0),\r\n                dragging: false,    \r\n                colour: hsl(signals.length*60, 100, 50)\r\n            },])\r\n\r\n            // Generating other sine waves\r\n            signals = signals.concat([{       \r\n                id: signals.length,\r\n                amplitude: 1,                \r\n                frequency: signals.length,   \r\n                phase: 0,\r\n                values: this.generateSignal(1,signals.length,0),\r\n                dragging: false,    \r\n                colour: hsl(signals.length*60, 100, 50)\r\n            },])\r\n        }\r\n\r\n\r\n        if(demoSignal == 'even'){\r\n            signals = this.emptyPlots();\r\n\r\n            // Generating DC signal\r\n            signals = signals.concat([{       \r\n                id: signals.length,\r\n                amplitude: 0,               \r\n                frequency: signals.length,  \r\n                phase: 0,\r\n                values: this.generateDC(0,signals.length,0),\r\n                dragging: false,    \r\n                colour: hsl(signals.length*60, 100, 50)\r\n            },])\r\n\r\n            // Generating other sine waves\r\n            for(let i = 0; i < 4; i++){\r\n                // Odd\r\n                if((i % 2) != 0 ){\r\n                    signals = signals.concat([{       \r\n                        id: signals.length,\r\n                        amplitude: 1,                \r\n                        frequency: signals.length,   \r\n                        phase: 0,\r\n                        values: this.generateSignal(1,signals.length,0),\r\n                        dragging: false,    \r\n                        colour: hsl(signals.length*60, 100, 50)\r\n                    },])\r\n                }\r\n                // Even\r\n                if((i % 2) == 0 ){\r\n                    signals = signals.concat([{       \r\n                        id: signals.length,\r\n                        amplitude: 0,                \r\n                        frequency: signals.length,   \r\n                        phase: 0,\r\n                        values: this.generateSignal(0,signals.length,0),\r\n                        dragging: false,    \r\n                        colour: hsl(signals.length*60, 100, 50)\r\n                    },])\r\n                }\r\n                    \r\n            }\r\n        }\r\n\r\n        if(demoSignal == 'odd'){\r\n            signals = this.emptyPlots();\r\n\r\n            // Generating DC signal\r\n            signals = signals.concat([{       \r\n                id: signals.length,\r\n                amplitude: 0,               \r\n                frequency: signals.length,  \r\n                phase: 0,\r\n                values: this.generateDC(0,signals.length,0),\r\n                dragging: false,    \r\n                colour: hsl(signals.length*60, 100, 50)\r\n            },])\r\n\r\n            // Generating other sine waves\r\n            for(let i = 0; i < 4; i++){\r\n                // Odd\r\n                if((i % 2) != 0 ){\r\n                    signals = signals.concat([{       \r\n                        id: signals.length,\r\n                        amplitude: 0,                \r\n                        frequency: signals.length,   \r\n                        phase: 0,\r\n                        values: this.generateSignal(0,signals.length,0),\r\n                        dragging: false,    \r\n                        colour: hsl(signals.length*60, 100, 50)\r\n                    },])\r\n                }\r\n                // Even\r\n                if((i % 2) == 0 ){\r\n                    signals = signals.concat([{       \r\n                        id: signals.length,\r\n                        amplitude: 1,                \r\n                        frequency: signals.length,   \r\n                        phase: 0,\r\n                        values: this.generateSignal(1,signals.length,0),\r\n                        dragging: false,    \r\n                        colour: hsl(signals.length*60, 100, 50)\r\n                    },])\r\n                }\r\n                    \r\n            }\r\n        }\r\n\r\n        if(demoSignal == 'triangle'){\r\n            signals = this.emptyPlots();\r\n\r\n            // Generating DC signal\r\n            signals = signals.concat([{       \r\n                id: signals.length,\r\n                amplitude: 0,               \r\n                frequency: signals.length,  \r\n                phase: 0,\r\n                values: this.generateDC(0,signals.length,0),\r\n                dragging: false,    \r\n                colour: hsl(signals.length*60, 100, 50)\r\n            },])\r\n\r\n            // Generating other sine waves\r\n            for(let i = 0; i < 25; i++){\r\n                // Odd\r\n                if((i % 2) != 0 ){\r\n                    let amp = (4/i)*Math.pow(-1,i); // (4/i) is decay. 4 is max amplitude level\r\n                        \r\n                    signals = signals.concat([{       \r\n                        id: signals.length,\r\n                        amplitude: amp,                \r\n                        frequency: signals.length,   \r\n                        phase: 0,\r\n                        values: this.generateSignal(amp,signals.length,0),\r\n                        dragging: false,    \r\n                        colour: hsl(signals.length*60, 100, 50)\r\n                    },])\r\n                }\r\n                // Even\r\n                if((i % 2) == 0 ){\r\n                    signals = signals.concat([{       \r\n                        id: signals.length,\r\n                        amplitude: 0,                \r\n                        frequency: signals.length,   \r\n                        phase: 0,\r\n                        values: this.generateSignal(0,signals.length,0),\r\n                        dragging: false,    \r\n                        colour: hsl(signals.length*60, 100, 50)\r\n                    },])\r\n                }\r\n                    \r\n            }\r\n        }\r\n\r\n        this.setState({\r\n            signals: signals,\r\n            demoSignal: demoSignal,\r\n        });\r\n    }\r\n\r\n    render() {\r\n\r\n    const current = this.state.signals;\r\n    console.log('demo:', this.state.demoSignal);\r\n\r\n    return (\r\n            <div className = {styles.container}>\r\n\r\n                <div className = {styles.timePlots} id = \"timePlotsID\">\r\n                    <div className = {styles.sinePlots} id =\"sinePlotsID\">\r\n                        <svg id=\"svgSinePlot\" width=\"40vw\" height=\"45vh\" \r\n                            style = {{\r\n                                position: \"relative\", \r\n                                top: \"0%\",\r\n                                left: \"0%\",\r\n                                transform: \"translate(0%, 0%)\",\r\n                                border: '1px solid black'\r\n                                }}> \r\n                            <SinePlot\r\n                                signals = {current}\r\n                            />\r\n                        </svg>\r\n                    </div>\r\n                    <div className = {styles.sumPlots} id =\"sumPlotsID\">\r\n                        <svg id=\"svgSumPlot\" width=\"40vw\" height=\"45vh\" \r\n                            style = {{\r\n                                position: \"relative\", \r\n                                top: \"0%\",\r\n                                left: \"0%\",\r\n                                transform: \"translate(0%, 0%)\",\r\n                                border: '1px solid black'\r\n                                }}> \r\n                            <SumPlot\r\n                                signals = {current}\r\n                            />\r\n                        </svg>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className = {styles.otherPlots}>\r\n                    <div className = {styles.fourierPhasePlots} id =\"fourierPhasePlotsID\">\r\n                        <svg id=\"svgFourierPhasePlot\" width=\"40vw\" height=\"45vh\"  \r\n                            style = {{\r\n                                position: \"relative\", \r\n                                top: \"0%\",\r\n                                left: \"0%\",\r\n                                transform: \"translate(0%, 0%)\",\r\n                                border: '1px solid black',\r\n                                \r\n                                }}> \r\n                        \r\n                            <FourierPhasePlot\r\n                                signals = {current}\r\n                                onMouseDown = {(event) => this.handleMouseDown(event)}\r\n                                onMouseUp = {(event) => this.handleMouseUp(event)}\r\n                                onMouseOut = {(event) => this.handleMouseUp(event)}\r\n                                onMouseMove = {(event) => this.handleMouseMoveFourierPhase(event)}\r\n                            />\r\n                        </svg>\r\n                    </div>\r\n\r\n                    <div className = {styles.fourierMagPlots} id =\"fourierMagPlotsID\">\r\n                        <svg id=\"svgFourierMagPlot\" width=\"40vw\" height=\"45vh\"  \r\n                            style = {{\r\n                                position: \"relative\", \r\n                                top: \"0%\",\r\n                                left: \"0%\",\r\n                                transform: \"translate(0%, 0%)\",\r\n                                border: '1px solid black',\r\n                                \r\n                                }}> \r\n                        \r\n                            <FourierMagPlot\r\n                                signals = {current}\r\n                                onMouseDown = {(event) => this.handleMouseDown(event)}\r\n                                onMouseUp = {(event) => this.handleMouseUp(event)}\r\n                                onMouseOut = {(event) => this.handleMouseUp(event)}\r\n                                onMouseMove = {(event) => this.handleMouseMoveFourierMag(event)}\r\n                            />\r\n                        </svg>\r\n                    </div>\r\n                    \r\n                </div>\r\n                <div className = {styles.controls}>\r\n                    \r\n                        <Controls\r\n                            signals = {current}\r\n                            demoSignal = {this.state.demoSignal}\r\n                            onChange = {(event) => this.handleChange(event)}\r\n                            onAdd = {(amplitude, phase) => this.addSignal(amplitude, phase)}\r\n                            onRemove = {(i) => this.removeSignal(i)}\r\n                            onDemoSignal = {(event) => this.handleDemoSignal(event)}\r\n                        />\r\n                    \r\n                </div>\r\n            </div>\r\n      );\r\n    }\r\n  }","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport styles from './FrequencyDomain.module.css';\r\nimport * as d3 from \"d3\";\r\n\r\nconst svgContainerWidth = 800;\r\nconst svgContainerHeight = 800;\r\n\r\nfunction Dials(props) {\r\n    return(\r\n        <div className={styles.signal_container}>\r\n            <div className={styles.signal_info}>\r\n                <div>ID: {props.signal.id}</div>\r\n                <button id = \"remove-signal\" onClick={(i) => props.onRemove(props.signal.id)}> Remove Signal </button>\r\n            </div>\r\n            <div className={styles.signal_props}>\r\n                <div>Amplitude: {props.signal.amplitude}</div>\r\n                <div>Frequency: {props.signal.frequency}</div>\r\n                <div>Phase: {props.signal.phase}</div>\r\n            </div>\r\n            <div className = {styles.signal_dials}>\r\n                <div>\r\n                    <input \r\n                    id = {\"signal\" + props.signal.id + \"_AmpDial\" }\r\n                    signal_id = {props.signal.id}\r\n                    input_type = {\"AmpDial\"}\r\n                    type =\"range\" \r\n                    min={-5} \r\n                    max ={5} \r\n                    value = {props.signal.amplitude} \r\n                    step={0.1}\r\n                    onChange={props.onChange}\r\n                    /> \r\n                    <input\r\n                    id = {\"signal\" + props.signal.id + \"_AmpText\" }\r\n                    signal_id = {props.signal.id}\r\n                    input_type = {\"AmpText\"}\r\n                    type = \"number\"  \r\n                    min = {-5}\r\n                    max = {5}\r\n                    onChange={props.onChange}\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <input \r\n                        id = {\"signal\" + props.signal.id + \"_FreqDial\" }\r\n                        signal_id = {props.signal.id}\r\n                        input_type = {\"FreqDial\"}\r\n                        type =\"range\" \r\n                        min={-4} \r\n                        max ={4} \r\n                        value = {props.signal.frequency} \r\n                        step={0.1}\r\n                        onChange={props.onChange}\r\n                    /> \r\n                    <input\r\n                        id = {\"signal\" + props.signal.id + \"_FreqText\" }\r\n                        signal_id = {props.signal.id}\r\n                        input_type = {\"FreqText\"}\r\n                        type = \"number\"  \r\n                        min = {-4}\r\n                        max = {4}\r\n                        onChange={props.onChange}\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <input \r\n                        id = {\"signal\" + props.signal.id + \"_PhaseDial\" }\r\n                        signal_id = {props.signal.id}\r\n                        input_type = {\"PhaseDial\"}\r\n                        type =\"range\" \r\n                        min={-180} \r\n                        max ={180} \r\n                        value = {props.signal.phase} \r\n                        step={1}\r\n                        onChange={props.onChange}\r\n                    /> \r\n                    <input\r\n                        id = {\"signal\" + props.signal.id + \"_PhaseText\" }\r\n                        signal_id = {props.signal.id}\r\n                        input_type = {\"PhaseText\"}\r\n                        type = \"number\"  \r\n                        min = {-180}\r\n                        max = {180}\r\n                        onChange={props.onChange}\r\n                    />\r\n                </div>        \r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nclass Controls extends React.Component {\r\n\r\n    renderDial(signal){\r\n        return(\r\n            <Dials\r\n                signal = {signal}\r\n                onChange = {(event) => this.props.onChange(event)}\r\n                onRemove = {(i) => this.props.onRemove(i)}\r\n            />\r\n        );\r\n    }\r\n\r\n    render(){\r\n        const signalList = []; \r\n        for (let i=0; i < this.props.signals.length; i++){\r\n            signalList.push(\r\n                <div key={\"signal\" + this.props.signals[i].id}> \r\n                    {this.renderDial(this.props.signals[i])} \r\n                </div>\r\n            )\r\n        }\r\n        return(\r\n            <div className = {styles.dials} >\r\n                {signalList}\r\n                <button id = \"add-signal\" align-content = \"center\" onClick={() => this.props.onAdd()}> Add New Signal </button>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction Circles(props) {\r\n        return(\r\n            <circle\r\n                id = {\"circle_\"+props.signal.id}\r\n                signal_id = {props.signal.id}\r\n                cx = {(props.signal.frequency)* (800/8)}\r\n                cy = {(props.signal.amplitude)*(800/8)}\r\n                transform=\"translate(400,400) scale(1,-1)\"\r\n                r = {20}\r\n                fill = \"black\"\r\n                stroke = \"black\"\r\n                strokeWidth=\"1\"\r\n                onMouseDown={props.onMouseDown}\r\n                onMouseUp={props.onMouseUp}\r\n                onMouseOut={props.onMouseUp}\r\n                onMouseMove={props.onMouseMove}\r\n            />\r\n        );\r\n    \r\n}\r\n\r\n\r\nclass SinePlot extends React.Component {\r\n    render(){\r\n        const current = this.props.signals;\r\n    \r\n        // Appending svg\r\n        // Check if the element 'svg_id' exists. If not, create new svg, append and draw it\r\n        // Not sure if this scales well \r\n\r\n        for(let i = 0; i < current.length; i++){\r\n\r\n            let svgID  = 'svg_'\r\n            let pathID = 'path_'\r\n            svgID = svgID.concat(i.toString(10))\r\n            pathID = pathID.concat(i.toString(10))\r\n\r\n            let lineGenerator = d3.line()\r\n                                  .curve(d3.curveNatural);\r\n\r\n            let pathData = lineGenerator(current[i].values);\r\n\r\n             // Create scale\r\n            let xscale = d3.scaleLinear()\r\n                        .domain([0, 2]) // This needs to be dynamic\r\n                        .range([50, 750]);\r\n\r\n            let yscale = d3.scaleLinear()\r\n                        .domain([3.5,-3.5]) // This needs to be dynamic\r\n                        .range([50, 750]);\r\n\r\n            // Add scales to axis\r\n            let x_axis = d3.axisBottom()\r\n                .scale(xscale);\r\n\r\n            let y_axis = d3.axisLeft()\r\n                .scale(yscale);\r\n\r\n            // For now, if svgID exists, then just redraw\r\n            if(document.getElementById(svgID)){\r\n                d3.select(\"#\"+pathID).attr(\"d\", pathData)  \r\n            }\r\n            \r\n            // If svgID doesn't exist, then add it to the DOM\r\n\r\n            if(!document.getElementById(svgID)){\r\n                //The SVG Container\r\n                const svgSinePlot = d3.select(\"#sinePlotsID\").append(\"svg\")\r\n                .attr(\"id\",svgID)\r\n                .attr(\"width\", svgContainerWidth)\r\n                .attr(\"height\", svgContainerHeight)\r\n                .attr(\"transform\",\"translate(10)\")\r\n                .attr(\"style\",\"position: absolute\")\r\n                .attr(\"style\", \"border: 1px solid black\")\r\n                .attr(\"top\",\"100px\")\r\n                .attr(\"left\",\"50px\")\r\n\r\n                svgSinePlot.append(\"text\")\r\n                .attr(\"text-anchor\", \"middle\")  \r\n                .attr(\"x\",400)\r\n                .attr(\"y\",30)\r\n                .style(\"font-size\", \"16px\") \r\n                .style(\"text-decoration\", \"underline\")  \r\n                .text(\"Sine Plot \" + i);\r\n\r\n                //The line SVG Path we draw\r\n                svgSinePlot.append(\"path\")\r\n                .attr(\"id\",pathID)\r\n                .attr(\"transform\",\"translate(50)\")\r\n                .attr(\"d\", pathData)\r\n                .attr(\"stroke\", \"blue\")\r\n                .attr(\"stroke-width\", 2)\r\n                .attr(\"fill\", \"none\")\r\n\r\n                svgSinePlot.append('g')\r\n                .attr(\"transform\",\"translate(0,400)\")\r\n                .call(x_axis);\r\n                \r\n                svgSinePlot.append('g')\r\n                .attr(\"transform\",\"translate(50,0)\")\r\n                .call(y_axis);\r\n            }          \r\n        }\r\n\r\n        return(\r\n            <div></div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport class FrequencyPlot extends React.Component {\r\n\r\n    renderCircle(signal){\r\n        return(\r\n            <Circles\r\n                signal = {signal}\r\n                onMouseDown = {(event) => this.props.onMouseDown(event)}\r\n                onMouseUp = {(event) => this.props.onMouseUp(event)}\r\n                onMouseOut = {(event) => this.props.onMouseUp(event)}\r\n                onMouseMove = {(event) => this.props.onMouseMove(event)}\r\n            />\r\n        );\r\n    }\r\n\r\n    render(){\r\n\r\n    const signals = this.props.signals;\r\n     \r\n        let freqSvg = d3.select(\"#svgFreqPlot\")\r\n\r\n        const circleList = []; \r\n       \r\n        for (let i=0; i < this.props.signals.length; i++){\r\n            circleList.push(\r\n                    this.renderCircle(this.props.signals[i])\r\n            )\r\n        }\r\n        \r\n        // Should probably check both axis if they exist before appending\r\n        if(!document.getElementById(\"x_axis_freqPlot\")){\r\n\r\n            // Create Axis for Frequency Plot\r\n            let xscale_freq = d3.scaleLinear()\r\n                                .domain([-3.5, 3.5]) // This needs to be dynamic\r\n                                .range([50, 750]);\r\n\r\n            let yscale_freq = d3.scaleLinear()\r\n                                .domain([3.5,-3.5]) // This needs to be dynamic\r\n                                .range([50, 750]);\r\n\r\n            // Add scales to axis\r\n            let x_axis_freq = d3.axisBottom()\r\n                                .scale(xscale_freq);\r\n\r\n            let y_axis_freq = d3.axisLeft()\r\n                                .scale(yscale_freq);\r\n            \r\n            freqSvg.append(\"text\")\r\n                    .attr(\"text-anchor\", \"middle\")  \r\n                    .attr(\"x\",400)\r\n                    .attr(\"y\",30)\r\n                    .style(\"font-size\", \"16px\") \r\n                    .style(\"text-decoration\", \"underline\")  \r\n                    .text(\"Frequency Domain Plot\");\r\n                    \r\n            freqSvg.append('g')\r\n                    .attr(\"id\",\"x_axis_freqPlot\")\r\n                    .attr(\"transform\",\"translate(0,400)\")\r\n                    .call(x_axis_freq);\r\n\r\n            freqSvg.append('g')\r\n                    .attr(\"id\",\"y_axis_freqPlot\")\r\n                    .attr(\"transform\",\"translate(400,0)\")\r\n                    .call(y_axis_freq); \r\n        }\r\n\r\n        return( \r\n            <svg>\r\n               {circleList}\r\n            </svg>\r\n        );\r\n    }\r\n}\r\n\r\nclass SumPlot extends React.Component {\r\n\r\n    render(){\r\n\r\n        let sumSignals = []; \r\n        let svgContainerHeight = 800;\r\n        let plotWidth = 700;\r\n\r\n        // This will break if we change plotWidth elsewhere \r\n        for(let k = 0; k < plotWidth; k++){\r\n            sumSignals.push([0,0]);\r\n        }\r\n\r\n        // Looping through all the signals\r\n        for (let i=0; i < this.props.signals.length; i++){\r\n\r\n            // Looping through the signal values\r\n            for(let j=0; j < this.props.signals[i].values.length; j++){\r\n\r\n                //sumSignals[j] = this.props.signals[i].values[j];\r\n                sumSignals[j][0] = this.props.signals[i].values[j][0];\r\n                sumSignals[j][1] += this.props.signals[i].values[j][1];\r\n            }\r\n            \r\n        }\r\n\r\n        // There is a way to scale this to the svg dimenesions rather than hardcoding it\r\n        for (let n =0; n < sumSignals.length; n++){\r\n            sumSignals[n][1] = sumSignals[n][1] - (this.props.signals.length-1)*(svgContainerHeight/2)\r\n        }\r\n\r\n        let lineGenerator = d3.line()\r\n          .curve(d3.curveNatural);\r\n\r\n        let pathData = lineGenerator(sumSignals);\r\n\r\n        // Create scale\r\n        let xscale = d3.scaleLinear()\r\n        .domain([0, 2]) // This needs to be dynamic\r\n        .range([50, 750]);\r\n\r\n        let yscale = d3.scaleLinear()\r\n        .domain([3.5,-3.5]) // This needs to be dynamic\r\n        .range([50, 750]);\r\n\r\n        // Add scales to axis\r\n        let x_axis = d3.axisBottom()\r\n        .scale(xscale);\r\n\r\n        let y_axis = d3.axisLeft()\r\n        .scale(yscale);\r\n\r\n        //The line SVG Path we draw\r\n\r\n        // If exists, update\r\n        if(document.getElementById(\"path_Sum\")){\r\n            d3.select(\"#\"+\"path_Sum\").attr(\"d\", pathData)  \r\n               \r\n        }\r\n        \r\n        // Draws path if it doesn't exist\r\n        if(!document.getElementById(\"path_Sum\")){\r\n             d3.select(\"#svgSumPlot\").append(\"path\")\r\n                .attr(\"id\",\"path_Sum\")\r\n                .attr(\"d\", pathData)\r\n                .attr(\"transform\",\"translate(50)\")\r\n                .attr(\"stroke\", \"blue\")\r\n                .attr(\"stroke-width\", 2)\r\n                .attr(\"fill\", \"none\")\r\n\r\n            const svgSumPlot = d3.select(\"#svgSumPlot\")\r\n\r\n                svgSumPlot.append(\"text\")\r\n                .attr(\"text-anchor\", \"middle\")  \r\n                .attr(\"x\",400)\r\n                .attr(\"y\",30)\r\n                .style(\"font-size\", \"16px\") \r\n                .style(\"text-decoration\", \"underline\")  \r\n                .text(\"Sum of Signals Plot\");\r\n\r\n                svgSumPlot.append('g')\r\n                .attr(\"transform\",\"translate(0,400)\")\r\n                .call(x_axis);\r\n\r\n                svgSumPlot.append('g')\r\n                .attr(\"transform\",\"translate(20,0)\")\r\n                .call(y_axis)\r\n                .attr(\"transform\",\"translate(50,0)\");\r\n                \r\n        }\r\n\r\n        return(\r\n            <div></div>\r\n        );\r\n    }\r\n}\r\n\r\nexport class FrequencyDomain extends React.Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            signals: [\r\n                /* Example signal object \r\n                    {\r\n                    id: 0,\r\n                    amplitude: 1,\r\n                    frequency: 1,\r\n                    values: this.generateSignal(1,1),\r\n                    dragging: false,    \r\n                    },\r\n                */\r\n            ],\r\n            circles:[\r\n            ],\r\n        };\r\n        // This binding is necessary to make `this.` work in the callback   \r\n        this.handleMouseDown = this.handleMouseDown.bind(this);\r\n        this.handleMouseUp = this.handleMouseUp.bind(this);\r\n        this.handleMouseMove = this.handleMouseMove.bind(this);\r\n    }\r\n    \r\n    addSignal(){\r\n        const signals = this.state.signals;\r\n\r\n        // Once this.setState has been called, it'll call render() to render straight away\r\n        this.setState({\r\n            signals: signals.concat([{  // Just concatenating array of JSON\r\n                id: signals.length,\r\n                amplitude: 0,           // Should be user input\r\n                frequency: 0,           // Should be user input\r\n                phase: 0,\r\n                values: this.generateSignal(0,0,0),\r\n                dragging: false,    \r\n            },]),\r\n        });        \r\n\r\n\r\n    }\r\n\r\n    removeSignal(i){\r\n        // Need to find signal id from the array and delete, then re-update id's\r\n        const signals = this.state.signals;\r\n\r\n\r\n        console.log(\"Hi from removeSignal\");    \r\n        console.log(i)\r\n        console.log(\"Before: \", signals);\r\n        signals.splice(i,1)\r\n        console.log(\"After:\", signals);\r\n\r\n        for(let n = 0; n< this.state.signals.length; n++){\r\n            signals[n].id = n;\r\n        }        \r\n\r\n        // Find the svgId and pathID and delete from DOM\r\n\r\n        let svgID  = 'svg_'\r\n        let pathID = 'path_'\r\n        svgID = svgID.concat(i.toString(10))\r\n        pathID = pathID.concat(i.toString(10))\r\n\r\n        d3.select(\"#\"+svgID).remove();\r\n\r\n        this.setState({\r\n            signals: signals,\r\n        });\r\n        console.log(this.state.signals);\r\n\r\n    \r\n    }\r\n\r\n    generateSignal(amplitude, frequency, phase){\r\n        // Generating path data\r\n        let points = [];\r\n        const plotHeight = 700;\r\n        const plotWidth = 700;\r\n        let scale = -100;\r\n        let x_offset = 0;\r\n        let y_offset = 50;\r\n\r\n        let Fs = 80;\r\n        let Ts = Math.PI / 200;\r\n\r\n        /* Calculation Reference\r\n        // 1 period = 1 second\r\n        // 1 period = 400 pixels => Ts = 400 samples per second\r\n        // 1 Hz = 2pi radians\r\n\r\n        // Sampling frequency = samples/second\r\n        // 1 sample per 1/400 second (Ts = 1/400)\r\n        // Fs = 2pi * (1/400)\r\n        // Fs = pi / 200\r\n\r\n        // Frequency is in Hz\r\n        // This is bascially an inverse FFT \r\n        // i is basically our t (1 unit of time)\r\n        */\r\n        for(let i = x_offset; i< plotWidth; i++)\r\n        {\r\n            points[i] = [i, scale*amplitude*Math.sin(Ts*frequency*i + (phase * (Math.PI / 180) )) + (plotHeight/2 + y_offset)];\r\n        }\r\n        return points;\r\n    }\r\n\r\n    updateDials(){\r\n        const signals = this.state.signals;\r\n\r\n        for(let i = 0; i< signals.length; i++){\r\n            document.getElementById(\"signal\" + signals[i].id + \"_AmpText\").value = signals[i].amplitude;\r\n            document.getElementById(\"signal\" + signals[i].id + \"_FreqText\").value = signals[i].frequency;\r\n        }\r\n    }\r\n\r\n    handleChange(event){\r\n\r\n\r\n        const signals = this.state.signals;\r\n        const inputType = event.target.getAttribute('input_type');\r\n        const signalID = event.target.getAttribute('signal_id'); // Signal ID Number\r\n        let value = parseFloat(event.target.value);   \r\n\r\n        // Text Form can currently exceed the maximum limit of 10, should limit?\r\n\r\n        if((inputType === \"AmpDial\") || (inputType === \"AmpText\")){\r\n            if(isNaN(value)){\r\n                value = 0;\r\n            }\r\n            else{\r\n                signals[signalID].amplitude = value;                 \r\n                signals[signalID].values = this.generateSignal(signals[signalID].amplitude, signals[signalID].frequency, signals[signalID].phase);\r\n                document.getElementById(\"signal\" + signalID + \"_AmpText\").value = value;\r\n            }\r\n        }\r\n        else if ((inputType === \"FreqDial\") || (inputType === \"FreqText\")){\r\n            if(isNaN(value)){\r\n                value = 0;\r\n            }\r\n            else{\r\n                signals[signalID].frequency = value; \r\n                signals[signalID].values = this.generateSignal(signals[signalID].amplitude, signals[signalID].frequency, signals[signalID].phase);\r\n                document.getElementById(\"signal\" + signalID + \"_FreqText\").value = value;\r\n            }\r\n        } \r\n        else if ((inputType === \"PhaseDial\") || (inputType === \"PhaseText\")){\r\n            if(isNaN(value)){\r\n                value = 0;\r\n            }\r\n            else{\r\n                signals[signalID].phase = value; \r\n                signals[signalID].values = this.generateSignal(signals[signalID].amplitude, signals[signalID].frequency, signals[signalID].phase);\r\n                document.getElementById(\"signal\" + signalID + \"_PhaseText\").value = value;\r\n            }\r\n        }     \r\n\r\n        this.setState({\r\n                signals: signals,   \r\n            }   \r\n        );\r\n\r\n    }\r\n\r\n    \r\n    handleMouseDown(e){\r\n        console.log(\"clicked\")\r\n\r\n        e.preventDefault();\r\n        const signals = this.state.signals;\r\n        const signalID = e.target.getAttribute('signal_id'); // Signal ID Number\r\n\r\n        signals[signalID].dragging = true;\r\n\r\n        this.setState({\r\n            signals: signals,   \r\n            }\r\n        );   \r\n    }\r\n\r\n    handleMouseUp(e){\r\n        console.log(\"click released\")\r\n\r\n        const signals = this.state.signals;\r\n        const signalID = e.target.getAttribute('signal_id'); // Signal ID Number\r\n        console.log(e.type)\r\n        if(e.type == 'mouseout' && signals[signalID].dragging) {\r\n            console.log(\"mouse went out\")\r\n            return;\r\n        }\r\n\r\n        signals[signalID].dragging = false;\r\n        \r\n        this.setState({\r\n            signals: signals,   \r\n            }\r\n        );\r\n        \r\n    }\r\n\r\n    handleMouseMove(e) {\r\n\r\n        const signals = this.state.signals;\r\n        const signalID = e.target.getAttribute('signal_id'); // Signal ID Number\r\n\r\n        //If we are dragging\r\n          if (signals[signalID].dragging) {\r\n              e.preventDefault();\r\n\r\n              console.log(e)\r\n              console.log(e.target)\r\n              console.log(\"clientX:\",e.clientX)\r\n              console.log(\"clientY:\",e.clientY)\r\n              // console.log(e.target.parentNode.parentNode)\r\n            let  rect = e.target.parentNode.parentNode.getBoundingClientRect();  \r\n\r\n            console.log(rect.left);\r\n            console.log(rect.top);\r\n\r\n\r\n            // Maybe should seperate coordinates and freq/amp values\r\n             signals[signalID].frequency = (e.clientX - rect.left - 400) / 100;\r\n             signals[signalID].amplitude = - (e.clientY - rect.top - 400) / 100;\r\n             signals[signalID].values = this.generateSignal(signals[signalID].amplitude, signals[signalID].frequency, signals[signalID].phase);\r\n\r\n\r\n            // We should set position limits\r\n\r\n            console.log(signals[signalID].frequency)\r\n            console.log(signals[signalID].amplitude)\r\n\r\n            console.log(this)\r\n\r\n            this.setState({\r\n                signals: signals,   \r\n                }\r\n            );  \r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n    const current = this.state.signals;\r\n\r\n    return (\r\n            <div className = {styles.container}>\r\n\r\n                <div className = {styles.sinePlots} id =\"sinePlotsID\">\r\n                    <SinePlot\r\n                        signals = {current}\r\n                    />\r\n                </div>\r\n\r\n                <div className = {styles.otherPlots}>\r\n                    <div className = {styles.freqPlots} id =\"freqPlotsID\">\r\n                        <svg id=\"svgFreqPlot\" width=\"800\" height=\"800\"  \r\n                            style = {{\r\n                                position: \"relative\", \r\n                                top: \"0%\",\r\n                                left: \"0%\",\r\n                                transform: \"translate(0%, 0%)\",\r\n                                border: '1px solid black',\r\n                                \r\n                                }}> \r\n                        \r\n                            <FrequencyPlot\r\n                                signals = {current}\r\n                                onMouseDown = {(event) => this.handleMouseDown(event)}\r\n                                onMouseUp = {(event) => this.handleMouseUp(event)}\r\n                                onMouseOut = {(event) => this.handleMouseUp(event)}\r\n                                onMouseMove = {(event) => this.handleMouseMove(event)}\r\n                            />\r\n                        </svg>\r\n                    </div>\r\n\r\n                    <div className = {styles.sumPlots} id =\"sumPlotsID\">\r\n                        <svg id=\"svgSumPlot\" width=\"800\" height=\"800\" \r\n                            style = {{\r\n                                position: \"relative\", \r\n                                top: \"0%\",\r\n                                left: \"0%\",\r\n                                transform: \"translate(0%, 0%)\",\r\n                                border: '1px solid black'\r\n                                }}> \r\n                            <SumPlot\r\n                                signals = {current}\r\n                            />\r\n                        </svg>\r\n                    </div>\r\n                </div>\r\n                <div className = {styles.controls}>\r\n                    \r\n                        <Controls\r\n                            signals = {current}\r\n                            onChange = {(event) => this.handleChange(event)}\r\n                            onAdd = {() => this.addSignal()}\r\n                            onRemove = {(i) => this.removeSignal(i)}\r\n                        />\r\n                    \r\n                </div>\r\n            </div>\r\n      );\r\n    }\r\n  }","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\n// import logo from './logo.svg';\r\nimport styles from './App.module.css';\r\nimport * as d3 from \"d3\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link\r\n} from \"react-router-dom\";\r\n\r\nimport {FourierCoefficients} from './FourierCoefficients.js'\r\nimport {FrequencyDomain} from './FrequencyDomain.js'\r\n\r\n/*\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n      <header className=\"App-header\">\r\n        <img src={logo} className=\"App-logo\" alt=\"logo\" />\r\n        <p>\r\n          Edit <code>src/App.js</code> and save to reload.\r\n        </p>\r\n        <a\r\n          className=\"App-link\"\r\n          href=\"https://reactjs.org\"\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n        >\r\n          Learn React\r\n        </a>\r\n      </header>\r\n    </div>\r\n  );\r\n}\r\n*/\r\n\r\n\r\n/* Known Bugs:\r\n- removeSignal() only works if you starting removing from the last signal\r\n- if you move/drag the mouse too fast the circle doesn't catch up\r\n- phase dial for DC signal updates amplitude when it's not meant to\r\n- negative phase circle is meant to move in opposite direction when dragged (cartersian coordinate problem)\r\n\r\n\r\n- Changing frequency does update the signal (when it's not meant to)\r\n^ But this is deliberate because we haven't updated FreqPlot functionality to fit with Fourier Plots\r\n*/\r\n\r\n\r\n\r\nfunction App() {\r\n    return (\r\n      <div className=\"App\">\r\n        <header className=\"App-header\">\r\n        </header>\r\n        <Router>\r\n          <div className = {styles.navbar}>\r\n                      <div className = {styles.tab} id=\"home\">  \r\n                        <Link to=\"/\">Home</Link>\r\n                      </div>\r\n                      <div className = {styles.tab}> \r\n                        <Link to=\"/about\">About</Link>\r\n                      </div>\r\n                      <div className = {styles.tab}>  \r\n                        <Link to=\"/FourierCoefficients\">Fourier Coefficients</Link>\r\n                      </div>\r\n                      <div className = {styles.tab}>  \r\n                        <Link to=\"/FrequencyDomain\">Frequency Domain</Link>\r\n                      </div>\r\n          </div>\r\n            {/*\r\n              A <Switch> looks through all its children <Route>\r\n              elements and renders the first one whose path\r\n              matches the current URL. Use a <Switch> any time\r\n              you have multiple routes, but you want only one\r\n              of them to render at a time\r\n            */}\r\n\r\n            <Switch>\r\n              <Route exact path=\"/\">\r\n                <Home />\r\n              </Route>\r\n              <Route path=\"/about\">\r\n                <About />\r\n              </Route>\r\n              <Route path=\"/FourierCoefficients\">\r\n                <FourierCoefficients />\r\n              </Route>\r\n              <Route path=\"/FrequencyDomain\">\r\n                <FrequencyDomain />\r\n              </Route>\r\n            </Switch>\r\n  \r\n        </Router>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function About() {\r\n    return (\r\n      <div className = {styles.centertext}>  \r\n        <div>\r\n          <h2>About the Project</h2>\r\n            <h4>\r\n              The aim of the project was to help students to have a more intuitive understanding \r\n              of the various topics in ECE2111 - Signals and Systems. The unit ECE2111, Signals and Systems, \r\n              taught by lecturer James Saunderson, involves many visual representations of the properties of \r\n              sinusoidal signals and their frequency response. \r\n            </h4>\r\n            <h4>\r\n              James had an idea of a helpful, interactive web application where students could interact \r\n              with and adjust signal properties and observe the relationships in time domain, frequency \r\n              domain etc. Hence, this final year project was proposed.\r\n            </h4>\r\n          <h2/>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  class Home extends React.Component{\r\n    render() {\r\n\r\n      return(\r\n      <div>\r\n        <div className = {styles.centertext}>  \r\n          <h2>Welcome!</h2>\r\n          <h4>\r\n            This website was designed to allow students to learn more about topics in the unit ECE2111\r\n            through visualization and interaction with signal properties.\r\n            \r\n          </h4>\r\n            <h4>\r\n              Feel free to explore the topics, there's (hopefully) more to come!\r\n            </h4>\r\n          </div>\r\n      </div>\r\n      )\r\n\r\n    };\r\n  }\r\n\r\n  // ========================================\r\n  \r\n  ReactDOM.render(\r\n    <App />,\r\n    document.getElementById('root')\r\n  );\r\n\r\n  export default App;","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}